(()=>{var e={};e.id=2478,e.ids=[2478],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},41204:e=>{"use strict";e.exports=require("string_decoder")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},47016:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(70260),a=r(28203),l=r(25155),n=r.n(l),o=r(67292),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["(frontend)",{children:["(employer)",{children:["approvalRequest",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,64081)),"C:\\Users\\justin\\Desktop\\vercel\\WFH-Monitoring\\src\\app\\(frontend)\\(employer)\\approvalRequest\\page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"C:\\Users\\justin\\Desktop\\vercel\\WFH-Monitoring\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\justin\\Desktop\\vercel\\WFH-Monitoring\\src\\app\\(frontend)\\(employer)\\approvalRequest\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(frontend)/(employer)/approvalRequest/page",pathname:"/approvalRequest",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},84142:(e,t,r)=>{Promise.resolve().then(r.bind(r,64081))},47190:(e,t,r)=>{Promise.resolve().then(r.bind(r,67693))},67693:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(45512),a=r(6355),l=r(58009),n=r(79727),o=r(79334),i=r(14477);let d=()=>{let[e,t]=(0,l.useState)(1),[r,d]=(0,l.useState)(""),[c,p]=(0,l.useState)(""),[u,m]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[b,y]=(0,l.useState)(!0),[g,f]=(0,l.useState)(null),v=(0,o.useRouter)(),j=(0,l.useRef)(null),[N,w]=(0,l.useState)([]),[k,S]=(0,l.useState)([]),[D,P]=(0,l.useState)([]),[C,R]=(0,l.useState)(!1),[A,E]=(0,l.useState)(null),[q,F]=(0,l.useState)([]),[T,_]=(0,l.useState)(""),I=e=>{f(g===e?null:e)};(0,l.useEffect)(()=>{localStorage.getItem("authToken")?O():v.push("/")},[]);let M=()=>{f(null)},O=async()=>{try{let e=await fetch("/employerAPI/notifications");if(!e.ok)throw Error("Failed to fetch notifications");let t=await e.json(),r=await fetch("/employerAPI/employee");if(!r.ok)throw Error("Failed to fetch employees");let s=await r.json();P(s);let a={};s.forEach(e=>{a[e.employeeId]=e.name});let l=(t.pending||[]).sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).map(e=>({...e,employeeName:a[e.employeeId]||"Unknown"}));S(l),y(!1)}catch(e){console.error("Error fetching data:",e),S([]),y(!1)}};console.log(k);let U=e=>{E(e),R(!0),f(null),console.log(e)},z=5*e;x.slice(z-5,z);let G=Math.ceil(x.length/5);return(0,s.jsxs)("div",{className:"min-h-screen shadow-md bg-white",children:[(0,s.jsx)(a.default,{}),(0,s.jsx)("div",{className:"container mx-auto p-2 mt-2",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("h1",{children:"Filter By:"}),(0,s.jsx)("input",{type:"date",value:r,onChange:e=>d(e.target.value),className:"px-4 py-2 border rounded-md"}),(0,s.jsx)("span",{children:"to"}),(0,s.jsx)("input",{type:"date",value:c,onChange:e=>p(e.target.value),className:"px-4 py-2 border rounded-md"}),(0,s.jsx)("button",{onClick:()=>{h(u.filter(e=>{let t=new Date(e.createdAt),s=r?new Date(r):null,a=c?new Date(c):null;return(!s||t>=s)&&(!a||t<=a)})),t(1)},className:"bg-blue-600 text-white px-4 py-2 rounded-md",children:"Filter"})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1",children:(0,s.jsxs)("div",{className:"card bg-white shadow-xl text-black p-10",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"REQUESTS LOG"}),(0,s.jsx)("div",{className:"overflow-x-auto min-h-[450px]",children:(0,s.jsxs)("table",{className:"table table-xs",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"px-4 py-2 border-b text-black text-center",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b text-black text-center",children:"Type"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b text-black text-center",children:"Name"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b text-black text-center",children:"Employee ID"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b text-black text-center",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b text-black text-center",children:"Action"})]})}),(0,s.jsx)("tbody",{children:b?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"5",className:"text-center py-4",children:"Loading..."})}):k.length>0?k.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 border-b text-black text-center",children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-4 py-2 border-b text-black text-center",children:e.file_type}),(0,s.jsx)("td",{className:"px-4 py-2 border-b text-black text-center",children:e.employeeName}),(0,s.jsx)("td",{className:"px-4 py-2 border-b text-black text-center",children:e.employeeId}),(0,s.jsx)("td",{className:`px-4 py-2 border-b text-black text-center ${"PENDING"===e.status?"text-yellow-600":"APPROVED"===e.status?"text-green-600":"text-red-600"}`,children:e.status}),(0,s.jsx)("td",{className:"px-4 py-2 border-b text-black text-center relative",children:(0,s.jsxs)("div",{className:"relative inline-block",ref:j,onMouseLeave:M,children:[(0,s.jsx)("button",{className:"p-2 rounded-md hover:bg-gray-200",onClick:()=>I(e.id),children:(0,s.jsx)(n.A,{className:"w-5 h-5"})}),g===e.id&&(0,s.jsxs)("div",{className:"absolute right-0 w-32 bg-white border rounded-md shadow-md z-10",children:[(0,s.jsx)("button",{className:"block px-4 py-2 w-full text-left hover:bg-gray-100",onClick:()=>{U(e)},children:"View"}),(0,s.jsx)("button",{className:"block px-4 py-2 w-full text-left hover:bg-gray-100",onClick:()=>{setDeleteEmployee(e),setIsDeleting(!0)},children:"Delete"}),(0,s.jsx)("button",{className:"block px-4 py-2 w-full text-left hover:bg-gray-100",onClick:()=>{openModal(emp)},children:"View Attendance"})]})]})})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"5",className:"text-center py-4",children:"No requests found."})})})]})}),G>1&&(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 bg-gray-500 text-white rounded",onClick:()=>t(e-1),disabled:1===e,children:"Previous"}),(0,s.jsxs)("div",{className:"text-center text-black",children:["Page ",e," of ",G]}),(0,s.jsx)("button",{className:"px-4 py-2 bg-gray-500 text-white rounded",onClick:()=>t(e+1),disabled:e===G,children:"Next"})]})]})})]})}),(0,s.jsx)(i.default,{isOpen:C,onClose:()=>{R(!1),E(null)},record:A,refresh:O,setMessage:e=>{_(e)}})]})}},14477:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(45512),a=r(58009);let l=({isOpen:e,onClose:t,record:r,refresh:l,setMessage:n})=>{let[o,i]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[p,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[h,b]=(0,a.useState)(!1),[y,g]=(0,a.useState)("");if((0,a.useEffect)(()=>{r?(i("DTRP"===r.file_type?r.type:r.leaveType),c(r.date?new Date(r.date).toISOString().slice(0,16):""),u("DTRP"===r.file_type?r.remarks:r.reason),x(r.reason||"")):(i(""),c(""),u(""),x(""))},[r]),!e)return null;let f=async e=>{e.preventDefault(),b(!0),g("");let s=localStorage.getItem("authToken");JSON.parse(localStorage.getItem("user")||"{}");let a=r.employeeId,i=r?{id:r.id,type:o,dateTime:d,remarks:p,file_type:r.file_type,employeeId:a,reason:r.reason,approval:"APPROVED",leaveStart:r.startDate,leaveEnd:r.endDate}:{employeeId:a,type:o,dateTime:d,remarks:p};try{if(!(await fetch("/employerAPI/approval",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(r?{...i,id:r.id}:i)})).ok)throw Error("Failed to submit Record");void 0!=i.id?n("Record Updated Successfully!"):n("Record Added Successfully!"),l(),t()}catch(e){console.error("Error submitting Record:",e),n("Failed to submit Record.")}finally{b(!1)}},v=async e=>{e.preventDefault(),b(!0),g("");let s=localStorage.getItem("authToken"),a=JSON.parse(localStorage.getItem("user")||"{}"),i=a?.employeeId,c=r?{id:r.id,type:o,dateTime:d,remarks:p}:{employeeId:i,type:o,dateTime:d,remarks:p};try{if(!(await fetch("/employeeAPI/dtrp",{method:r?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(r?{...c,id:r.id}:c)})).ok)throw Error("Failed to submit Record");void 0!=c.id?n("Record Updated Successfully!"):n("Record Added Successfully!"),l(),t()}catch(e){console.error("Error submitting Record:",e),n("Failed to submit Record.")}finally{b(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 text-black",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"DTRP"==r.file_type?"Daily Time Record Problem":"Leave2 "}),(0,s.jsx)("label",{className:"block mb-2 font-medium",children:" Type"}),"DTRP"===r.file_type?(0,s.jsxs)("select",{className:"w-full px-4 py-2 border rounded-md mb-4 bg-gray-200 cursor-not-allowed",value:o,onChange:e=>i(e.target.value),disabled:!0,children:[(0,s.jsx)("option",{value:"time-in",children:"Time In"}),(0,s.jsx)("option",{value:"time-out",children:"Time Out"})]}):(0,s.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-md mb-4 bg-gray-200 cursor-not-allowed",value:r.leaveType,disabled:!0}),(0,s.jsx)("label",{className:"block mb-2 font-medium",children:"DTRP"===r.file_type?"Date & Time":"Date Covered"}),"DTRP"===r.file_type?(0,s.jsx)("input",{type:"datetime-local",className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",value:d,onChange:e=>c(e.target.value),disabled:!0}):(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 font-medium",children:"Start Date"}),(0,s.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-md mb-4 bg-gray-200 cursor-not-allowed",value:r.startDate,disabled:!0}),(0,s.jsx)("label",{className:"block mb-2 font-medium",children:"End Date"}),(0,s.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-md mb-4 bg-gray-200 cursor-not-allowed",value:r.endDate,disabled:!0})]}),(0,s.jsx)("label",{className:"block mb-2 font-medium",children:"Remarks"}),(0,s.jsx)("textarea",{className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",rows:3,placeholder:"Enter remarks...",value:p,onChange:e=>u(e.target.value),disabled:!0}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 bg-blue-500 text-white rounded-md",children:"Close"}),(0,s.jsx)("button",{onClick:f,className:"px-4 py-2 bg-green-500 text-white rounded-md",children:h?"Submitting...":r?"Approved":"Submit"}),(0,s.jsx)("button",{onClick:v,className:"px-4 py-2 bg-red-500 text-white rounded-md",children:h?"Submitting...":r?"Disapproved":"Submit"})]})]})})}},6355:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(45512),a=r(28531),l=r.n(a),n=r(58009),o=r(79334),i=r(51255),d=r(48320),c=r(35120),p=r(25637),u=r(45103);let m=()=>{let[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),[h,b]=(0,n.useState)(null),[y,g]=(0,n.useState)(!1),f=(0,o.useRouter)(),v=(0,o.usePathname)(),j={"/employerDashboard":"Dashboard","/employeeMonitoring":"Employee Monitoring","/approvalRequest":"Approval Request","/manageEmployee":"Manage Employee","/employerReports":"Reports","/screenCaptureMonitoring":"Screen Capture"},N=j[v]||"Dashboard";return(0,n.useEffect)(()=>{let e=localStorage.getItem("user");e&&b(JSON.parse(e))},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("nav",{className:"bg-white shadow-md text-gray-600 relative z-50",children:[(0,s.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{className:"md:hidden text-red mr-3",onClick:()=>t(!e),children:e?(0,s.jsx)(i.A,{className:"w-6 h-6"}):(0,s.jsx)(d.A,{className:"w-6 h-6"})}),(0,s.jsx)("div",{className:"hidden md:flex space-x-6",children:Object.keys(j).map(e=>(0,s.jsx)(l(),{href:e,className:`${v===e?"bg-[#FFFFFF] text-gray-700 font-semibold text-lg":"text-gray-400 text-base"} hover:bg-[#FFFFFF] hover:text-black px-2 py-2 rounded`,children:j[e]},e))})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{className:"flex items-center space-x-2 text-black",onClick:()=>a(!r),children:[(0,s.jsx)("div",{className:"avatar avatar-online",children:(0,s.jsx)("div",{className:"w-9 h-9 rounded-full ring ",children:(0,s.jsx)(u.default,{src:"/img/user-icon.png",alt:"User Icon",width:60,height:60,className:"w-14 h-14 mr-4"})})}),(0,s.jsx)("span",{className:"text-gray-600",children:h?h.name:"Loading..."})]}),r&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white text-black rounded-lg shadow-lg",children:[(0,s.jsxs)("div",{className:"p-2 border-b",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:h?h.name:"Unknown"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:h?h.email:"No Email"})]}),(0,s.jsxs)("button",{onClick:()=>{a(!1),x(!0),setTimeout(()=>{x(!1),localStorage.removeItem("user"),localStorage.removeItem("authToken"),f.push("/")},2e3)},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100 flex items-center",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 mr-2"}),"Logout"]})]})]})]}),(0,s.jsx)("div",{className:`${e?"block":"hidden"} md:hidden bg-[#135D66] py-2`,children:Object.keys(j).map(e=>(0,s.jsx)(l(),{href:e,className:`${v===e?"bg-[#0F4A55]":""} block px-4 py-2 text-white hover:bg-[#0F4A55]`,children:j[e]},e))}),m&&(0,s.jsxs)("div",{className:"absolute top-4 right-4 bg-green-600 text-white p-3 rounded-lg shadow-lg flex items-center",children:[(0,s.jsx)(p.A,{className:"w-5 h-5 mr-2"}),"Logging out..."]})]}),(0,s.jsx)("div",{className:"container mx-auto mt-6 p-6 bg-gray-700 shadow-xl flex justify-between items-center",children:(0,s.jsx)("h1",{className:"text-xl font-semibold text-white",children:N})})]})}},64081:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\justin\\\\Desktop\\\\vercel\\\\WFH-Monitoring\\\\src\\\\app\\\\(frontend)\\\\(employer)\\\\approvalRequest\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\justin\\Desktop\\vercel\\WFH-Monitoring\\src\\app\\(frontend)\\(employer)\\approvalRequest\\page.tsx","default")},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(88077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},79727:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(94825).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,114,8077,1492,9159],()=>r(47016));module.exports=s})();