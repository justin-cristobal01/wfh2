(()=>{var e={};e.id=1629,e.ids=[1629],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},41204:e=>{"use strict";e.exports=require("string_decoder")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},916:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(70260),a=s(28203),n=s(25155),l=s.n(n),i=s(67292),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["(frontend)",{children:["(employee)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,81254)),"C:\\Users\\justin\\Desktop\\vercel\\WFH-Monitoring\\src\\app\\(frontend)\\(employee)\\dashboard\\page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,71354)),"C:\\Users\\justin\\Desktop\\vercel\\WFH-Monitoring\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\justin\\Desktop\\vercel\\WFH-Monitoring\\src\\app\\(frontend)\\(employee)\\dashboard\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(frontend)/(employee)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},47325:(e,t,s)=>{Promise.resolve().then(s.bind(s,81254))},33821:(e,t,s)=>{Promise.resolve().then(s.bind(s,71330))},71330:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(45512),a=s(25527),n=s(58009),l=s(24948),i=s(26695),o=s(79334);i.t1.register(i.Bs,i.m_,i.s$);let d=()=>{let[e,t]=(0,n.useState)("ACTIVE"),[s,i]=(0,n.useState)("Idle"),[d,c]=(0,n.useState)(0),[u,p]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),x=(0,o.useRouter)(),f=void 0,[g,b]=(0,n.useState)(0),[v,j]=(0,n.useState)(0),[y,N]=(0,n.useState)(0),[w,C]=(0,n.useState)("Daily"),[P,k]=(0,n.useState)(!1),[E,S]=(0,n.useState)(""),[D,q]=(0,n.useState)("");(0,n.useEffect)(()=>{localStorage.getItem("authToken")?T():x.push("/")},[]);let T=async()=>{try{if(!f)return;let e=await fetch(`/employeeAPI/notifications?employeeId=${f}`),t=await e.json();p(t.latest||[]),h(t.pending||[])}catch(e){console.error("Error fetching notification logs:",e),p([]),h([])}};(0,n.useEffect)(()=>{if(!f)return;let e=new EventSource(`/employeeAPI/dashboard?employeeId=${f}`);return e.onmessage=e=>{try{let s=JSON.parse(e.data);s&&0!==Object.keys(s).length?(b(s.idleTime||0),j(s.sleepingTime||0),N(s.totaltime||0),t(s.employeeStatus||"ACTIVE"),i(s.wakefulnessStatus||"Idle"),c(s.productivityPercentage||100)):(console.warn("No data received from SSE connection."),b(0),j(0),N(0),t("ACTIVE"),i("Idle"),c(0))}catch(e){t("ACTIVE"),i("Idle"),c(0),b(0),j(0),N(0)}},e.onerror=s=>{t("ACTIVE"),i("Idle"),c(0),b(0),j(0),N(0),e.close()},()=>{e.close()}},[f]);let I=e=>{"DTRP"===e?x.push("/dtr-problem"):"Overtime"===e?x.push("/overtime"):"Leave"===e&&x.push("/leaves")},A=()=>{k(!1)};return(0,r.jsxs)("div",{className:"min-h-screen shadow-md bg-white",children:[(0,r.jsx)(a.default,{}),(0,r.jsx)("div",{className:"container mx-auto p-2 mt-2",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"flex-1 bg-white shadow-lg rounded-lg p-4 text-gray-700",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Employee Activity & Productivity"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Activity:"}),(0,r.jsx)("span",{className:`ml-2 px-2 py-1 rounded text-white text-xs ${"ACTIVE"===e?"bg-green-500":"bg-red-500"}`,children:e})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Productivity:"}),(0,r.jsxs)("span",{className:`ml-2 px-2 py-1 rounded text-white text-xs ${d<=50?"bg-red-500":"bg-green-500"}`,children:[d,"%"]})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Wakefulness:"}),(0,r.jsx)("span",{className:`ml-2 px-2 py-1 rounded text-white text-xs ${"Awake"===s?"bg-green-500":"Idle"===s?"bg-yellow-500":"Sleeping"===s?"bg-red-500":"bg-gray-500"}`,children:s})]})]}),(0,r.jsxs)("div",{className:"card bg-white shadow-md text-black p-10",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Quick Access"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"/dtr-problem",className:"text-blue-500 hover:underline",children:"Daily Time Record Problems"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"/leaves",className:"text-blue-500 hover:underline",children:"Leaves"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"/overtime",className:"text-blue-500 hover:underline",children:"Overtime"})})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"card bg-white shadow-md text-black p-10",children:[(0,r.jsx)("h1",{className:"text-xl font-bold mb-4",children:"NOTIFICATION LOGS"}),(0,r.jsx)("h2",{className:"font-semibold text-lg ",children:"Latest Requests"}),(0,r.jsx)("hr",{className:"my-2 border-gray-300"}),u.length>0?(0,r.jsx)("div",{className:"mb-4",children:["Leave","Overtime","DTRP"].map(e=>{let t=u.filter(t=>t.type===e).slice(0,2);return(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-[12px]",children:e}),t.length>0?(0,r.jsx)("ul",{children:t.map((e,t)=>(0,r.jsxs)("li",{onClick:()=>I(e.type),className:"text-blue-600 border-b py-2 cursor-pointer hover:text-blue-300 text-[10px]",children:[e.status," (",new Date(e.createdAt).toLocaleString(),")"]},t))}):(0,r.jsxs)("p",{className:"text-gray-500",children:["No recent ",e.toLowerCase()," requests"]})]},e)})}):(0,r.jsx)("p",{children:"No recent requests"}),(0,r.jsx)("h3",{className:"font-semibold text-lg ",children:"Pending Requests"}),(0,r.jsx)("hr",{className:"my-2 border-gray-300"}),m.length>0?(0,r.jsx)("div",{children:["Leave","Overtime","DTRP"].map(e=>{let t=m.filter(t=>t.type===e).slice(0,2);return(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-[12px]",children:e}),t.length>0?(0,r.jsx)("ul",{children:t.map((e,t)=>(0,r.jsxs)("li",{onClick:()=>I(e.type),className:"text-blue-600 border-b py-2 cursor-pointer hover:text-blue-300 text-[10px]",children:[e.status," (",new Date(e.createdAt).toLocaleString(),")"]},t))}):(0,r.jsxs)("p",{className:"text-gray-500",children:["No pending ",e.toLowerCase()," requests"]})]},e)})}):(0,r.jsx)("p",{children:"No pending requests"})]}),(0,r.jsxs)("div",{className:"card bg-white shadow-md text-black p-10",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Productivity vs Idle Time vs Sleeping Time"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"dateRange",className:"text-sm font-medium",children:"Filter by: "}),(0,r.jsxs)("select",{id:"dateRange",value:w,onChange:e=>{C(e.target.value),"Date Range"===e.target.value&&(S("2025-01-01"),q("2025-01-31"),k(!0))},className:"mt-2 border p-2 rounded",children:[(0,r.jsx)("option",{value:"Daily",children:"Daily"}),(0,r.jsx)("option",{value:"Monthly",children:"Monthly"}),(0,r.jsx)("option",{value:"Date Range",children:"Date Range"})]})]}),(0,r.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,r.jsx)("div",{className:"w-80 h-80",children:(0,r.jsx)(l.nu,{data:(()=>{if(0===y)return{labels:["No Data"],datasets:[{data:[1,1,1],backgroundColor:["#e0e0e0"]}]};let e=g/y*100,t=v/y*100;return{labels:["Productive Tasks","Idle Time","Sleeping"],datasets:[{data:[100-e-t,e,t],backgroundColor:["#4CAF50","#FFC107","#F44336"],hoverBackgroundColor:["#45a049","#ffca2c","#e53935"]}]}})()})})})]})]})]})}),P&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg w-94",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Selected Date Range"}),(0,r.jsx)("div",{className:"space-y-4 mb-4",children:(0,r.jsxs)("div",{className:"flex justify-between space-x-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{htmlFor:"startDate",className:"text-sm font-medium",children:"Date From:"}),(0,r.jsx)("input",{id:"startDate",type:"date",value:E,onChange:e=>S(e.target.value),className:"mt-2 border p-2 rounded w-full"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{htmlFor:"endDate",className:"text-sm font-medium",children:"Date To:"}),(0,r.jsx)("input",{id:"endDate",type:"date",value:D,onChange:e=>q(e.target.value),className:"mt-2 border p-2 rounded w-full"})]})]})}),(0,r.jsxs)("div",{className:"flex space-x-4 mt-4",children:[(0,r.jsx)("button",{onClick:A,className:"px-8 py-2 bg-red-500 text-white rounded w-full sm:w-auto ml-60",children:"Exit"}),(0,r.jsx)("button",{onClick:A,className:"px-8 py-2 bg-blue-500 text-white rounded w-full sm:w-auto ml-auto",children:"OK"})]})]})})]})}},81254:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\justin\\\\Desktop\\\\vercel\\\\WFH-Monitoring\\\\src\\\\app\\\\(frontend)\\\\(employee)\\\\dashboard\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\justin\\Desktop\\vercel\\WFH-Monitoring\\src\\app\\(frontend)\\(employee)\\dashboard\\page.tsx","default")},24948:(e,t,s)=>{"use strict";s.d(t,{N1:()=>c,nu:()=>u});var r=s(58009),a=s(26695);let n="label";function l(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function i(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,r=[];e.datasets=t.map(t=>{let a=e.datasets.find(e=>e[s]===t[s]);return!a||!t.data||r.includes(a)?{...t}:(r.push(a),Object.assign(a,t),a)})}let o=(0,r.forwardRef)(function(e,t){let{height:s=150,width:o=300,redraw:d=!1,datasetIdKey:c,type:u,data:p,options:m,plugins:h=[],fallbackContent:x,updateMode:f,...g}=e,b=(0,r.useRef)(null),v=(0,r.useRef)(null),j=()=>{b.current&&(v.current=new a.t1(b.current,{type:u,data:function(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r={labels:[],datasets:[]};return t=e.labels,r.labels=t,i(r,e.datasets,s),r}(p,c),options:m&&{...m},plugins:h}),l(t,v.current))},y=()=>{l(t,null),v.current&&(v.current.destroy(),v.current=null)};return(0,r.useEffect)(()=>{!d&&v.current&&m&&function(e,t){let s=e.options;s&&t&&Object.assign(s,t)}(v.current,m)},[d,m]),(0,r.useEffect)(()=>{if(!d&&v.current){var e,t;e=v.current.config.data,t=p.labels,e.labels=t}},[d,p.labels]),(0,r.useEffect)(()=>{!d&&v.current&&p.datasets&&i(v.current.config.data,p.datasets,c)},[d,p.datasets]),(0,r.useEffect)(()=>{v.current&&(d?(y(),setTimeout(j)):v.current.update(f))},[d,m,p.labels,p.datasets,f]),(0,r.useEffect)(()=>{v.current&&(y(),setTimeout(j))},[u]),(0,r.useEffect)(()=>(j(),()=>y()),[]),r.createElement("canvas",{ref:b,role:"img",height:s,width:o,...g},x)});function d(e,t){return a.t1.register(t),(0,r.forwardRef)((t,s)=>r.createElement(o,{...t,ref:s,type:e}))}let c=d("line",a.ZT),u=d("doughnut",a.ju)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,114,8077,1492,6695,9159,7374],()=>s(916));module.exports=r})();