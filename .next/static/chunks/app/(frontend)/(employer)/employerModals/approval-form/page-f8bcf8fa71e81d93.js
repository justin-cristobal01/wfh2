(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8998],{3185:(e,t,l)=>{Promise.resolve().then(l.bind(l,54655))},54655:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>d});var a=l(95155),r=l(12115);let d=e=>{let{isOpen:t,onClose:l,record:d,refresh:o,setMessage:s}=e,[i,n]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[b,y]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[x,g]=(0,r.useState)("");if((0,r.useEffect)(()=>{d?(n("DTRP"===d.file_type?d.type:d.leaveType),u(d.date?new Date(d.date).toISOString().slice(0,16):""),p("DTRP"===d.file_type?d.remarks:d.reason),y(d.reason||"")):(n(""),u(""),p(""),y(""))},[d]),!t)return null;let v=async e=>{e.preventDefault(),f(!0),g("");let t=localStorage.getItem("authToken");JSON.parse(localStorage.getItem("user")||"{}");let a=d.employeeId,r=d?{id:d.id,type:i,dateTime:c,remarks:m,file_type:d.file_type,employeeId:a,reason:d.reason,approval:"APPROVED",leaveStart:d.startDate,leaveEnd:d.endDate}:{employeeId:a,type:i,dateTime:c,remarks:m};try{if(!(await fetch("/employerAPI/approval",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(d?{...r,id:d.id}:r)})).ok)throw Error("Failed to submit Record");void 0!=r.id?s("Record Updated Successfully!"):s("Record Added Successfully!"),o(),l()}catch(e){console.error("Error submitting Record:",e),s("Failed to submit Record.")}finally{f(!1)}},S=async e=>{e.preventDefault(),f(!0),g("");let t=localStorage.getItem("authToken"),a=JSON.parse(localStorage.getItem("user")||"{}"),r=null==a?void 0:a.employeeId,n=d?{id:d.id,type:i,dateTime:c,remarks:m}:{employeeId:r,type:i,dateTime:c,remarks:m};try{if(!(await fetch("/employeeAPI/dtrp",{method:d?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(d?{...n,id:d.id}:n)})).ok)throw Error("Failed to submit Record");void 0!=n.id?s("Record Updated Successfully!"):s("Record Added Successfully!"),o(),l()}catch(e){console.error("Error submitting Record:",e),s("Failed to submit Record.")}finally{f(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 text-black",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"DTRP"==d.file_type?"Daily Time Record Problem":"Leave2 "}),(0,a.jsx)("label",{className:"block mb-2 font-medium",children:" Type"}),"DTRP"===d.file_type?(0,a.jsxs)("select",{className:"w-full px-4 py-2 border rounded-md mb-4 bg-gray-200 cursor-not-allowed",value:i,onChange:e=>n(e.target.value),disabled:!0,children:[(0,a.jsx)("option",{value:"time-in",children:"Time In"}),(0,a.jsx)("option",{value:"time-out",children:"Time Out"})]}):(0,a.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-md mb-4 bg-gray-200 cursor-not-allowed",value:d.leaveType,disabled:!0}),(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"DTRP"===d.file_type?"Date & Time":"Date Covered"}),"DTRP"===d.file_type?(0,a.jsx)("input",{type:"datetime-local",className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",value:c,onChange:e=>u(e.target.value),disabled:!0}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Start Date"}),(0,a.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-md mb-4 bg-gray-200 cursor-not-allowed",value:d.startDate,disabled:!0}),(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"End Date"}),(0,a.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-md mb-4 bg-gray-200 cursor-not-allowed",value:d.endDate,disabled:!0})]}),(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Remarks"}),(0,a.jsx)("textarea",{className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",rows:3,placeholder:"Enter remarks...",value:m,onChange:e=>p(e.target.value),disabled:!0}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,a.jsx)("button",{onClick:l,className:"px-4 py-2 bg-blue-500 text-white rounded-md",children:"Close"}),(0,a.jsx)("button",{onClick:v,className:"px-4 py-2 bg-green-500 text-white rounded-md",children:h?"Submitting...":d?"Approved":"Submit"}),(0,a.jsx)("button",{onClick:S,className:"px-4 py-2 bg-red-500 text-white rounded-md",children:h?"Submitting...":d?"Disapproved":"Submit"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1517,7358],()=>t(3185)),_N_E=e.O()}]);