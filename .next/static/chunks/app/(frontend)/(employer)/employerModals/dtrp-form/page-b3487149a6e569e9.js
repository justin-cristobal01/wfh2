(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2689],{51342:(e,t,l)=>{Promise.resolve().then(l.bind(l,7528))},7528:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>r});var a=l(95155),s=l(12115);let r=e=>{let{isOpen:t,onClose:l,record:r,refresh:i,setMessage:d}=e,[o,n]=(0,s.useState)("time-in"),[c,m]=(0,s.useState)(""),[u,b]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[x,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)("");if((0,s.useEffect)(()=>{r?(n(r.type||""),m(r.date?new Date(r.date).toISOString().slice(0,16):""),b(r.remarks||""),p(r.reason||"")):(n(""),m(""),b(""),p(""))},[r]),!t)return null;let j=async e=>{e.preventDefault(),g(!0),y("");let t=localStorage.getItem("authToken"),a=JSON.parse(localStorage.getItem("user")||"{}"),s=null==a?void 0:a.employeeId,n=r?{id:r.id,type:o,dateTime:c,remarks:u}:{employeeId:s,type:o,dateTime:c,remarks:u};try{if(!(await fetch("/employeeAPI/dtrp",{method:r?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(r?{...n,id:r.id}:n)})).ok)throw Error("Failed to submit Record");void 0!=n.id?d("Record Updated Successfully!"):d("Record Added Successfully!"),i(),l()}catch(e){console.error("Error submitting Record:",e),d("Failed to submit Record.")}finally{g(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 text-black",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Daily Time Record Problem"}),h&&(0,a.jsx)("div",{className:"text-red-500 mb-2",children:h}),(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Select Type"}),(0,a.jsxs)("select",{className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",value:o,onChange:e=>n(e.target.value),children:[(0,a.jsx)("option",{value:"time-in",children:"Time In"}),(0,a.jsx)("option",{value:"time-out",children:"Time Out"})]}),(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Date & Time"}),(0,a.jsx)("input",{type:"datetime-local",className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",value:c,onChange:e=>m(e.target.value)}),(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Remarks"}),(0,a.jsx)("textarea",{className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",rows:3,placeholder:"Enter remarks...",value:u,onChange:e=>b(e.target.value)}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,a.jsx)("button",{onClick:l,className:"px-4 py-2 bg-red-500 text-white rounded-md",children:"Close"}),(0,a.jsx)("button",{onClick:j,className:"px-4 py-2 bg-green-500 text-white rounded-md",children:x?"Submitting...":r?"Update":"Submit"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1517,7358],()=>t(51342)),_N_E=e.O()}]);