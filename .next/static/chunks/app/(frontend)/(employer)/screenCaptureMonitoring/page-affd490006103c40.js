(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6362],{44534:(e,t,s)=>{Promise.resolve().then(s.bind(s,79501))},79501:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(95155),l=s(12115),r=s(35781),c=s(93137),n=s(76046),i=s(5565);r.t1.register(r.Bs,r.m_,r.s$);let o=()=>{let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(null),[o,d]=(0,l.useState)([]),[m,h]=(0,l.useState)(""),[x,u]=(0,l.useState)("All"),[g,p]=(0,l.useState)(!1),[b,j]=(0,l.useState)(""),[f,v]=(0,l.useState)(""),[w,y]=(0,l.useState)(null),N=(0,n.useRouter)();(0,l.useEffect)(()=>{localStorage.getItem("authToken")?S():N.push("/")},[]);let k=async()=>{if(!s||!b||!f)return;let e=new Date(b).toISOString(),t=new Date(f).toISOString();try{let a=await fetch("/employerAPI/screenShot?employeeId=".concat(s.employeeId,"&startDate=").concat(e,"&endDate=").concat(t));if(!a.ok)throw Error("Failed to fetch screenshots");let l=await a.json();d(l.screenshots)}catch(e){console.error("Error fetching filtered screenshots:",e),d([])}},S=async()=>{try{let e=await fetch("/employerAPI/employee");if(!e.ok)throw Error("Failed to fetch employees");let s=await e.json();t(s)}catch(e){console.error("Error fetching employees:",e)}};console.log(e);let A=async e=>{try{let t=await fetch("/employerAPI/screenShot?employeeId=".concat(e));if(!t.ok)throw Error("Failed to fetch screenshots");let s=await t.json();d(s.screenshots)}catch(e){console.error("Error fetching screenshots:",e),d([])}},C=e=>{switch(e){case"Idle":return"text-[#FFC107]";case"Active":return"text-green-500";case"On Leave":return"text-red-500";case"Sleeping":return"text-blue-500";default:return"text-gray-500"}},F=e=>{r(e),p(!0),A(e.employeeId)},I=e.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())).filter(e=>"All"===x||e.activityStatus===x);return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)(c.default,{}),(0,a.jsxs)("div",{className:"container mx-auto p-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search employee...",value:m,onChange:e=>h(e.target.value),className:"p-2 border rounded-md"}),(0,a.jsxs)("select",{className:"p-2 border rounded-md bg-white text-gray-500",value:x,onChange:e=>u(e.target.value),children:[(0,a.jsx)("option",{value:"All",children:"All"}),(0,a.jsx)("option",{value:"Active",children:"Active"}),(0,a.jsx)("option",{value:"Idle",children:"Idle"}),(0,a.jsx)("option",{value:"On Leave",children:"On Leave"}),(0,a.jsx)("option",{value:"Sleeping",children:"Sleeping"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:I.map(e=>(0,a.jsxs)("div",{className:"relative bg-white shadow-lg p-4 rounded-lg cursor-pointer hover:shadow-xl flex flex-col items-center w-60",onClick:()=>F(e),children:[(0,a.jsx)(i.default,{src:"/img/user-icon.png",alt:"User Icon",width:60,height:60,className:"w-14 h-14 rounded-full object-cover"}),(0,a.jsx)("div",{className:"flex flex-col items-center text-center w-full mt-2",children:(0,a.jsx)("p",{className:"text-md font-semibold text-gray-800 break-words w-full mb-2",children:e.name})}),(0,a.jsx)("p",{className:"text-sm font-medium ".concat(C(e.activityStatus)),children:null===e.activityStatus?"Active":e.activityStatus})]},e.id))}),g&&s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-500",children:s.name}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-2 items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),(0,a.jsx)("input",{type:"datetime-local",value:b,onChange:e=>j(e.target.value),className:"mt-1 block w-full p-2 border bg-white text-black appearance-auto [&::-webkit-calendar-picker-indicator]:invert"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),(0,a.jsx)("input",{type:"datetime-local",value:f,onChange:e=>v(e.target.value),className:"mt-1 block w-full p-2 border bg-white text-black appearance-auto [&::-webkit-calendar-picker-indicator]:invert"})]}),(0,a.jsx)("button",{onClick:k,className:"bg-blue-500 text-white px-4 py-2 rounded-md mt-6",children:"Apply"})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Screenshots"}),o.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 mt-3",children:o.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-2",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-700 block text-center mb-1",children:new Date(e.createdAt).toLocaleString()}),(0,a.jsx)("img",{src:e.image,alt:"Screenshot ".concat(t+1),className:"w-full h-auto rounded-md cursor-pointer",onClick:()=>y(e.image)})]},t))}):(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:"No screenshots available."})]}),(0,a.jsx)("button",{className:"mt-4 bg-red-500 text-white px-4 py-2 rounded-md w-full",onClick:()=>p(!1),children:"Close"})]})}),w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center p-4",onClick:()=>y(null),children:(0,a.jsx)("img",{src:w,alt:"Enlarged Screenshot",className:"max-w-full max-h-full rounded-lg shadow-lg"})})]})]})}},93137:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(95155),l=s(48173),r=s.n(l),c=s(12115),n=s(76046),i=s(689),o=s(87936),d=s(21354),m=s(13261),h=s(5565);let x=()=>{let[e,t]=(0,c.useState)(!1),[s,l]=(0,c.useState)(!1),[x,u]=(0,c.useState)(!1),[g,p]=(0,c.useState)(null),[b,j]=(0,c.useState)(!1),f=(0,n.useRouter)(),v=(0,n.usePathname)(),w={"/employerDashboard":"Dashboard","/employeeMonitoring":"Employee Monitoring","/approvalRequest":"Approval Request","/manageEmployee":"Manage Employee","/employerReports":"Reports","/screenCaptureMonitoring":"Screen Capture"},y=w[v]||"Dashboard";return(0,c.useEffect)(()=>{let e=localStorage.getItem("user");e&&p(JSON.parse(e))},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("nav",{className:"bg-white shadow-md text-gray-600 relative z-50",children:[(0,a.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{className:"md:hidden text-red mr-3",onClick:()=>t(!e),children:e?(0,a.jsx)(i.A,{className:"w-6 h-6"}):(0,a.jsx)(o.A,{className:"w-6 h-6"})}),(0,a.jsx)("div",{className:"hidden md:flex space-x-6",children:Object.keys(w).map(e=>(0,a.jsx)(r(),{href:e,className:"".concat(v===e?"bg-[#FFFFFF] text-gray-700 font-semibold text-lg":"text-gray-400 text-base"," hover:bg-[#FFFFFF] hover:text-black px-2 py-2 rounded"),children:w[e]},e))})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"flex items-center space-x-2 text-black",onClick:()=>l(!s),children:[(0,a.jsx)("div",{className:"avatar avatar-online",children:(0,a.jsx)("div",{className:"w-9 h-9 rounded-full ring ",children:(0,a.jsx)(h.default,{src:"/img/user-icon.png",alt:"User Icon",width:60,height:60,className:"w-14 h-14 mr-4"})})}),(0,a.jsx)("span",{className:"text-gray-600",children:g?g.name:"Loading..."})]}),s&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white text-black rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"p-2 border-b",children:[(0,a.jsx)("p",{className:"text-sm font-semibold",children:g?g.name:"Unknown"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:g?g.email:"No Email"})]}),(0,a.jsxs)("button",{onClick:()=>{l(!1),u(!0),setTimeout(()=>{u(!1),localStorage.removeItem("user"),localStorage.removeItem("authToken"),f.push("/")},2e3)},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100 flex items-center",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 mr-2"}),"Logout"]})]})]})]}),(0,a.jsx)("div",{className:"".concat(e?"block":"hidden"," md:hidden bg-[#135D66] py-2"),children:Object.keys(w).map(e=>(0,a.jsx)(r(),{href:e,className:"".concat(v===e?"bg-[#0F4A55]":""," block px-4 py-2 text-white hover:bg-[#0F4A55]"),children:w[e]},e))}),x&&(0,a.jsxs)("div",{className:"absolute top-4 right-4 bg-green-600 text-white p-3 rounded-lg shadow-lg flex items-center",children:[(0,a.jsx)(m.A,{className:"w-5 h-5 mr-2"}),"Logging out..."]})]}),(0,a.jsx)("div",{className:"container mx-auto mt-6 p-6 bg-gray-700 shadow-xl flex justify-between items-center",children:(0,a.jsx)("h1",{className:"text-xl font-semibold text-white",children:y})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5647,8376,2675,8441,1517,7358],()=>t(44534)),_N_E=e.O()}]);