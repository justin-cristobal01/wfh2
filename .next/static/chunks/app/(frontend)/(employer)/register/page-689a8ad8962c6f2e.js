(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5691],{94213:(e,t,a)=>{Promise.resolve().then(a.bind(a,89174))},76046:(e,t,a)=>{"use strict";var s=a(66658);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},89174:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(95155),l=a(12115),r=a(76046),n=a(90919);let o=()=>{let[e,t]=(0,l.useState)(""),[a,o]=(0,l.useState)(!1),[i,d]=(0,l.useState)(""),[u,c]=(0,l.useState)(""),[m,p]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),[g,b]=(0,l.useState)({name:"",email:"",position:"",department:"",contactNumber:"",address:"",scheduleTimein:"",scheduleTimeout:""}),v=(0,r.useRouter)(),[f,y]=(0,l.useState)({password:"",status:"Active",name:"",email:"",role:""}),w=async()=>{v.push("/")},N=async()=>{try{let e=await fetch("/employerAPI/register");if(!e.ok)throw Error("Failed to fetch employee ID");let a=(await e.json()).employeeId;if(console.log(a),!g.name||!g.email||!g.position||!f.password||!f.role){t("⚠️ Please fill in all required fields.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)){t("⚠️ Invalid email address!");return}t("");let s={...f,employeeId:a,name:g.name,email:g.email,status:"Active"};if(!(await fetch("/employerAPI/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw Error("Failed to create user");let l={...g,employeeId:a};if(!(await fetch("/employerAPI/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw Error("Failed to register employee");d("Registered Succesfully"),c("alert-success"),o(!0),b({name:"",email:"",position:"",department:"",contactNumber:"",address:"",scheduleTimein:"",scheduleTimeout:""}),y({password:"",status:"Active",name:"",email:"",role:""}),setTimeout(()=>{v.push("/")},2e3)}catch(e){t("❌ Error: ".concat(e.message))}};return(0,s.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Register Employee"}),e&&(0,s.jsx)("div",{className:"text-red-500 mb-2",children:e}),(0,s.jsxs)("select",{className:"border p-2 rounded w-full mb-2 bg-white text-gray-700",value:f.role,onChange:e=>y({...f,role:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Select Role"}),(0,s.jsx)("option",{value:"EMPLOYEE",children:"Employee"}),(0,s.jsx)("option",{value:"ADMIN",children:"Admin"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Name",className:"border p-2 rounded w-full mb-2",value:g.name,onChange:e=>b({...g,name:e.target.value})}),(0,s.jsx)("input",{type:"email",placeholder:"Email",className:"border p-2 rounded w-full mb-2",value:g.email,onChange:e=>b({...g,email:e.target.value})}),(0,s.jsx)("input",{type:"password",placeholder:"Password",className:"border p-2 rounded w-full mb-2",value:f.password,onChange:e=>y({...f,password:e.target.value})}),(0,s.jsx)("input",{type:"text",placeholder:"Position",className:"border p-2 rounded w-full mb-2",value:g.position,onChange:e=>b({...g,position:e.target.value})}),(0,s.jsx)("input",{type:"text",placeholder:"Department",className:"border p-2 rounded w-full mb-2",value:g.department,onChange:e=>b({...g,department:e.target.value})}),(0,s.jsx)("input",{type:"text",placeholder:"Contact no.",className:"border p-2 rounded w-full mb-2",value:g.contactNumber,onChange:e=>b({...g,contactNumber:e.target.value})}),(0,s.jsx)("input",{type:"text",placeholder:"Address",className:"border p-2 rounded w-full mb-2",value:g.address,onChange:e=>b({...g,address:e.target.value})}),(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsxs)("div",{className:"w-1/2 pr-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Schedule Check-in"}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",type:"time",value:g.scheduleTimein,onChange:e=>b({...g,scheduleTimein:e.target.value})})]}),(0,s.jsxs)("div",{className:"w-1/2 pl-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Schedule Timeout"}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",type:"time",value:g.scheduleTimeout,onChange:e=>b({...g,scheduleTimeout:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsx)("button",{className:"bg-gray-400 text-white px-4 py-2 rounded mr-2",onClick:w,children:"Cancel"}),(0,s.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:N,children:"Register"})]})]}),a&&(0,s.jsx)(n.A,{toastMessage:i,toastStatus:u})]})}},90919:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(95155);a(12115);let l=function(e){let{toastMessage:t,toastStatus:a}=e;return(0,s.jsx)("div",{className:"toast",children:(0,s.jsx)("div",{className:"alert ".concat(a),children:(0,s.jsx)("span",{className:"text-white",children:t})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1517,7358],()=>t(94213)),_N_E=e.O()}]);