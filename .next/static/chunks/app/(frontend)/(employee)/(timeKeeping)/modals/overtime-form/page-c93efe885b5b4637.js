(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8954],{74956:(e,t,a)=>{Promise.resolve().then(a.bind(a,5183))},5183:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(95155),s=a(12115);let l=e=>{let{isOpen:t,onClose:a,overtime:l,refresh:i,setMessage:n,setError:d}=e,[o,c]=(0,s.useState)(""),[m,u]=(0,s.useState)(""),[x,f]=(0,s.useState)(""),[h,b]=(0,s.useState)(!1),p=new Date().toISOString().slice(0,10),g=new Date(new Date(p).getTime()+288e5),v=e=>new Date(new Date(e).getTime()+288e5).toISOString().slice(0,16);if((0,s.useEffect)(()=>{l?(c(l.startDate?v(l.startDate):""),u(l.endDate?v(l.endDate):""),f(l.reason||"")):(c(""),u(""),f(""))},[l]),!t)return null;let w=async e=>{e.preventDefault();let t=o&&new Date(o)>new Date(g)||m&&new Date(m)>new Date(g);if(new Date(m)<new Date(o)){n("End date cannot be earlier than start date!"),d("error");return}let r=new Date(o);if((new Date(m).getTime()-r.getTime())/36e5<1){n("Minimum to file overtime is 1 hour."),d("error");return}if(t){n("Future dates are not allowed for Overtime!"),d("error");return}b(!0),n("");let s=localStorage.getItem("authToken"),c=JSON.parse(localStorage.getItem("user")||"{}"),u=null==c?void 0:c.employeeId,f=l?{id:l.id,startDate:o,endDate:m,reason:x}:{employeeId:u,startDate:o,endDate:m,reason:x};try{if(!(await fetch("/employeeAPI/overtime",{method:l?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(l?{...f,id:l.id}:f)})).ok)throw Error("Failed to submit overtime");void 0!==f.id?n("Overtime Updated Successfully!"):n("Overtime Added Successfully!"),d("success"),i(),a()}catch(e){n("".concat(e)),d("error")}finally{b(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96 text-black",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"File Overtime"}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Date & Time From"}),(0,r.jsx)("input",{type:"datetime-local",value:o,onChange:e=>c(e.target.value),className:"border p-2 rounded-md",required:!0,min:p})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Date & Time To"}),(0,r.jsx)("input",{type:"datetime-local",value:m,onChange:e=>u(e.target.value),className:"border p-2 rounded-md",required:!0,min:p})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Reason for Overtime"}),(0,r.jsx)("textarea",{value:x,onChange:e=>f(e.target.value),className:"border p-2 rounded-md bg-white",rows:3,required:!0})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 bg-red-400 text-white rounded-md",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md",children:"Submit"})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1517,7358],()=>t(74956)),_N_E=e.O()}]);