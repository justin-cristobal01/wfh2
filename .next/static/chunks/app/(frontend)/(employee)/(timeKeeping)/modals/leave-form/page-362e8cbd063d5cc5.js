(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5286],{83346:(e,t,a)=>{Promise.resolve().then(a.bind(a,87321))},87321:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var l=a(95155),s=a(12115);let r=e=>{let{isOpen:t,onClose:a,leave:r,refresh:i,setMessage:n}=e,[d,c]=(0,s.useState)(""),[o,u]=(0,s.useState)(""),[m,v]=(0,s.useState)(""),[b,x]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[p,y]=(0,s.useState)("");(0,s.useEffect)(()=>{r?(c(r.leaveType||""),u(r.startDate?new Date(r.startDate).toISOString().slice(0,10):""),v(r.endDate?new Date(r.endDate).toISOString().slice(0,10):""),x(r.reason||"")):(c(""),u(""),v(""),x(""))},[r]);let f=new Date().toISOString().slice(0,10),S=("Sick Leave"===d||"Emergency Leave"===d)&&(o>f||m>f);if(!t)return null;let j=async e=>{if(e.preventDefault(),S){y("Future dates are not allowed for Sick Leave and Emergency Leave.");return}g(!0),y("");let t=localStorage.getItem("authToken"),l=JSON.parse(localStorage.getItem("user")||"{}"),s=null==l?void 0:l.employeeId,c=r?{id:r.id,leaveType:d,startDate:o,endDate:m,reason:b}:{employeeId:s,leaveType:d,startDate:o,endDate:m,reason:b};try{if(!(await fetch("/employeeAPI/leave",{method:r?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(r?{...c,id:r.id}:c)})).ok)throw Error("Failed to submit leave");void 0!=c.id?n("Leave Updated Successfully!"):n("Leave Added Successfully!"),i(),a()}catch(e){console.error("Error submitting leave:",e),n("Failed to submit leave.")}finally{g(!1)}};return(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 text-black",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-96",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:r?"Edit Leave":"File a Leave"}),p&&(0,l.jsx)("p",{className:"text-red-500 text-sm mb-2",children:p}),(0,l.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Leave Type"}),(0,l.jsxs)("select",{value:d,onChange:e=>c(e.target.value),required:!0,className:"mt-1 block w-full p-2 border rounded-md  bg-white",children:[(0,l.jsx)("option",{value:"",children:"Select Leave Type"}),(0,l.jsx)("option",{value:"Sick Leave",children:"Sick Leave"}),(0,l.jsx)("option",{value:"Vacation Leave",children:"Vacation Leave"}),(0,l.jsx)("option",{value:"Emergency Leave",children:"Emergency Leave"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),(0,l.jsx)("input",{type:"date",value:o,onChange:e=>u(e.target.value),required:!0,className:"mt-1 block w-full p-2 border rounded-md bg-white",max:"Sick Leave"===d||"Emergency Leave"===d?f:void 0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),(0,l.jsx)("input",{type:"date",value:m,onChange:e=>v(e.target.value),required:!0,className:"mt-1 block w-full p-2 border rounded-md bg-white",max:"Sick Leave"===d||"Emergency Leave"===d?f:void 0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Reason"}),(0,l.jsx)("textarea",{value:b,onChange:e=>x(e.target.value),required:!0,className:"mt-1 block w-full p-2 border rounded-md resize-none  bg-white",rows:3})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>{a()},className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-gray-500",disabled:h,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-blue-700",disabled:h||S,children:h?"Submitting...":r?"Update":"Submit"})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1517,7358],()=>t(83346)),_N_E=e.O()}]);