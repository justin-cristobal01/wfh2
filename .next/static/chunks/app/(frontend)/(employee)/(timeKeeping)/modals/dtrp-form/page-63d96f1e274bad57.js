(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3533],{91047:(e,t,a)=>{Promise.resolve().then(a.bind(a,92448))},92448:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var l=a(95155),r=a(12115);let i=e=>{let{isOpen:t,onClose:a,record:i,refresh:s,setMessage:d}=e,[n,o]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[u,b]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[x,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(""),w=new Date().toISOString().slice(0,10);new Date(w).getTime();let S=e=>new Date(new Date(e).getTime()+288e5).toISOString().slice(0,16);if((0,r.useEffect)(()=>{i?(o(i.type),m(i.date?S(i.date):""),b(i.remarks||""),p(i.reason||"")):(o(""),m(""),b(""),p(""))},[i]),!t)return null;let j=async e=>{if(""===n||""===u)return;if(e.preventDefault(),new Date(w)<=new Date(c)){d("Date time cannot be earlier than today date!"),y("error");return}g(!0),y("");let t=localStorage.getItem("authToken"),l=JSON.parse(localStorage.getItem("user")||"{}"),r=null==l?void 0:l.employeeId,o=i?{id:i.id,type:n,dateTime:c,remarks:u}:{employeeId:r,dateTime:c,type:n,remarks:u};try{if(!(await fetch("/employeeAPI/dtrp?employeeId=".concat(r),{method:i?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(i?{...o,id:i.id}:o)})).ok)throw Error("Failed to submit Record");void 0!=o.id?d("Record Updated Successfully!"):d("Record Added Successfully!"),s(),a()}catch(e){console.error("Error submitting Record:",e),d("Failed to submit Record.")}finally{g(!1)}};return(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 text-black",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Daily Time Record Problem"}),h&&(0,l.jsx)("div",{className:"text-red-500 mb-2",children:h}),(0,l.jsx)("label",{className:"block mb-2 font-medium",children:"Select Type"}),(0,l.jsxs)("select",{className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",value:n,onChange:e=>o(e.target.value),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select"}),(0,l.jsx)("option",{value:"time-in",children:"Time In"}),(0,l.jsx)("option",{value:"time-out",children:"Time Out"})]}),(0,l.jsx)("label",{className:"block mb-2 font-medium",children:"Date & Time"}),(0,l.jsx)("input",{type:"datetime-local",className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",value:c,onChange:e=>m(e.target.value)}),(0,l.jsx)("label",{className:"block mb-2 font-medium",children:"Remarks"}),(0,l.jsx)("textarea",{className:"w-full px-4 py-2 border rounded-md mb-4 bg-white",rows:3,placeholder:"Enter remarks...",value:u,onChange:e=>b(e.target.value)}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,l.jsx)("button",{onClick:a,className:"px-4 py-2 bg-red-500 text-white rounded-md",children:"Close"}),(0,l.jsx)("button",{onClick:j,className:"px-4 py-2 bg-green-500 text-white rounded-md",children:x?"Submitting...":i?"Update":"Submit"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1517,7358],()=>t(91047)),_N_E=e.O()}]);